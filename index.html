<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NTB Challenge â€” í•™ë…„ë³„ 100ì œ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#F7F7F7; --text:#333; --accent:#C4A484; --accent-hover:#b89878; --border:#EAEAEA; --muted:#AAAAAA; }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter, "Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif}
    .app{max-width:520px;margin:0 auto;min-height:100%;background:#fff;display:flex;flex-direction:column;position:relative;box-shadow:0 10px 40px rgba(0,0,0,.05)}
    header{padding:28px 24px;border-bottom:1px solid var(--border)}
    h1{font-family:"Noto Sans KR", Inter, sans-serif;margin:0;font-size:1.6rem}

    .view{display:none;flex:1;padding:24px;animation:fade .35s ease}
    .view.active{display:flex;flex-direction:column;gap:16px}
    @keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

    .btn{appearance:none;border:none;border-radius:12px;padding:14px 16px;font-weight:700;cursor:pointer;transition:.2s}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-primary:hover{background:var(--accent-hover)}
    .btn-ghost{background:#f4f4f4;color:var(--text)}
    .btn-ghost:hover{background:#e9e9e9}
    .btn-muted{background:transparent;color:var(--muted)}
    .btn-danger{background:#f8e4e4;color:#b21919}

    .stack{display:flex;flex-direction:column;gap:12px}
    .grid{display:grid;gap:10px}
    .grid.cols-2{grid-template-columns:1fr 1fr}

    .choices{display:grid;gap:10px;margin-top:6px}
    .choices.cols-3{grid-template-columns:repeat(1, 1fr)}
    .choices.cols-5{grid-template-columns:repeat(1, 1fr)}
    .choices.cols-7{grid-template-columns:repeat(1, 1fr)}
    @media (min-width:420px){
      .choices.cols-3{grid-template-columns:repeat(3, 1fr)}
      .choices.cols-5{grid-template-columns:repeat(3, 1fr)}
      .choices.cols-7{grid-template-columns:repeat(3, 1fr)}
    }

    .word{font-family:"Noto Sans KR", Inter, sans-serif;font-size:2.6rem;font-weight:800;text-align:center;margin:6px 0 12px}
    .sub{font-size:.92rem;color:#888;text-align:center}
    .feedback{min-height:26px;text-align:center;font-weight:800}

    .bar{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .pill{font-size:.88rem;background:#f3f3f3;border:1px solid var(--border);border-radius:999px;padding:6px 10px}

    .row{display:flex;gap:10px;align-items:center}
    .spacer{flex:1}
    .hidden{display:none !important}
    .correct{border:2px solid #23a55b !important}
    .wrong{border:2px solid #d93025 !important}
      #home-view{justify-content:center}
    #home-view .home-stack{margin:0 auto;max-width:420px;gap:16px}
    #home-view .home-stack .grid{margin-top:8px}
    /* tighten level view spacing */
    #level-view{justify-content:flex-start}
    #level-view .level-stack{margin-top:12px}
  </style>
</head>
<body>
  <div class="app">
    <header><h1>NTB Challenge</h1></header>

    <!-- 1) í•™ë…„(ì„¸íŠ¸) ì„ íƒ -->
    <section id="home-view" class="view active">
      <div class="stack home-stack">
        <p class="sub">ì›í•˜ëŠ” ì„¸íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš” (ê° 100ë¬¸ì œ)</p>
        <div class="grid cols-2">
          <button class="btn btn-primary" data-set="elem">ì´ˆë“± 100ê°œ</button>
          <button class="btn btn-ghost" data-set="mid">ì¤‘ë“± 100ê°œ</button>
          <button class="btn btn-ghost" data-set="high">ê³ ë“± 100ê°œ</button>
          <button class="btn btn-ghost" data-set="uni">ëŒ€í•™ 100ê°œ</button>
        </div>
      </div>
    </section>

    <!-- 2) ë‹¨ê³„ ì„ íƒ -->
    <section id="level-view" class="view">
      <div class="bar"><div id="level-title" class="pill">â€”</div><div class="spacer"></div><button id="back-home" class="btn btn-ghost">â† ë’¤ë¡œ</button></div>
      <div class="stack level-stack">
        <p class="sub">ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš” (ë³´ê¸° ê°œìˆ˜)</p>
        <button class="btn btn-primary" data-level="1">1ë‹¨ê³„ (3ì§€ì„ ë‹¤)</button>
        <button class="btn btn-ghost" data-level="2">2ë‹¨ê³„ (5ì§€ì„ ë‹¤)</button>
        <button class="btn btn-ghost" data-level="3">3ë‹¨ê³„ (7ì§€ì„ ë‹¤)</button>
      </div>
    </section>

    <!-- 3) í€´ì¦ˆ í™”ë©´ -->
    <section id="quiz-view" class="view">
      <div class="bar">
        <div id="crumb" class="pill">â€”</div>
        <div class="row">
          <button id="tts-btn" class="btn btn-ghost" title="ë‹¤ì‹œ ë“£ê¸°">ğŸ”Š</button>
        </div>
      </div>
      <div id="word-display" class="word">â€”</div>
      <div id="choices" class="choices cols-3 hidden"></div>
      <div class="row" style="margin-top:10px">
        <button id="idk-btn" class="btn btn-ghost">ëª¨ë¦„</button>
        <button id="show-choices-btn" class="btn btn-ghost" title="ë³´ê¸° í¼ì¹˜ê¸°">ë³´ê¸°</button>
        <div class="spacer"></div>
        <button id="next-btn" class="btn btn-primary" disabled>ë‹¤ìŒ â–¶ï¸</button>
      </div>
      <div id="feedback" class="feedback"></div>
      <p class="sub" style="margin-top:auto">ì •ë‹µì„ ê³ ë¥´ê±°ë‚˜ <strong>ëª¨ë¦„</strong>ì„ ëˆ„ë¥´ë©´ ì •ë‹µì´ í‘œì‹œë©ë‹ˆë‹¤. (ì˜¤ë‹µì€ í ë’¤ë¡œ ì¬ì¶œì œ)</p>
    </section>
  </div>

  <script>
  // ===== 0) ë°ì´í„°ì…‹ (ê° 100ê°œ) =====
  const DATASETS = {
    elem: {
      name: 'ì´ˆë“± 100ê°œ',
      words: [
        {english:'apple', korean:'ì‚¬ê³¼'},
        {english:'banana', korean:'ë°”ë‚˜ë‚˜'},
        {english:'cat', korean:'ê³ ì–‘ì´'},
        {english:'dog', korean:'ê°œ'},
        {english:'bird', korean:'ìƒˆ'},
        {english:'fish', korean:'ë¬¼ê³ ê¸°'},
        {english:'book', korean:'ì±…'},
        {english:'pen', korean:'íœ'},
        {english:'bag', korean:'ê°€ë°©'},
        {english:'chair', korean:'ì˜ì'},
        {english:'table', korean:'íƒì'},
        {english:'bed', korean:'ì¹¨ëŒ€'},
        {english:'cup', korean:'ì»µ'},
        {english:'milk', korean:'ìš°ìœ '},
        {english:'water', korean:'ë¬¼'},
        {english:'bread', korean:'ë¹µ'},
        {english:'rice', korean:'ìŒ€, ë°¥'},
        {english:'egg', korean:'ë‹¬ê±€'},
        {english:'school', korean:'í•™êµ'},
        {english:'teacher', korean:'ì„ ìƒë‹˜'},
        {english:'student', korean:'í•™ìƒ'},
        {english:'friend', korean:'ì¹œêµ¬'},
        {english:'family', korean:'ê°€ì¡±'},
        {english:'mother', korean:'ì–´ë¨¸ë‹ˆ'},
        {english:'father', korean:'ì•„ë²„ì§€'},
        {english:'sister', korean:'ì—¬ì í˜•ì œ'},
        {english:'brother', korean:'ë‚¨ì í˜•ì œ'},
        {english:'house', korean:'ì§‘'},
        {english:'room', korean:'ë°©'},
        {english:'door', korean:'ë¬¸'},
        {english:'window', korean:'ì°½ë¬¸'},
        {english:'car', korean:'ìë™ì°¨'},
        {english:'bus', korean:'ë²„ìŠ¤'},
        {english:'train', korean:'ê¸°ì°¨'},
        {english:'bike', korean:'ìì „ê±°'},
        {english:'street', korean:'ê±°ë¦¬'},
        {english:'park', korean:'ê³µì›'},
        {english:'tree', korean:'ë‚˜ë¬´'},
        {english:'flower', korean:'ê½ƒ'},
        {english:'sun', korean:'íƒœì–‘'},
        {english:'moon', korean:'ë‹¬'},
        {english:'star', korean:'ë³„'},
        {english:'sky', korean:'í•˜ëŠ˜'},
        {english:'rain', korean:'ë¹„'},
        {english:'snow', korean:'ëˆˆ'},
        {english:'cloud', korean:'êµ¬ë¦„'},
        {english:'day', korean:'ë‚®, í•˜ë£¨'},
        {english:'night', korean:'ë°¤'},
        {english:'morning', korean:'ì•„ì¹¨'},
        {english:'evening', korean:'ì €ë…'},
        {english:'happy', korean:'í–‰ë³µí•œ'},
        {english:'sad', korean:'ìŠ¬í”ˆ'},
        {english:'big', korean:'í°'},
        {english:'small', korean:'ì‘ì€'},
        {english:'long', korean:'ê¸´'},
        {english:'short', korean:'ì§§ì€'},
        {english:'hot', korean:'ëœ¨ê±°ìš´'},
        {english:'cold', korean:'ì°¨ê°€ìš´'},
        {english:'good', korean:'ì¢‹ì€'},
        {english:'bad', korean:'ë‚˜ìœ'},
        {english:'up', korean:'ìœ„ë¡œ'},
        {english:'down', korean:'ì•„ë˜ë¡œ'},
        {english:'left', korean:'ì™¼ìª½'},
        {english:'right', korean:'ì˜¤ë¥¸ìª½'},
        {english:'run', korean:'ë‹¬ë¦¬ë‹¤'},
        {english:'walk', korean:'ê±·ë‹¤'},
        {english:'jump', korean:'ì í”„í•˜ë‹¤'},
        {english:'sit', korean:'ì•‰ë‹¤'},
        {english:'stand', korean:'ì„œë‹¤'},
        {english:'eat', korean:'ë¨¹ë‹¤'},
        {english:'drink', korean:'ë§ˆì‹œë‹¤'},
        {english:'read', korean:'ì½ë‹¤'},
        {english:'write', korean:'ì“°ë‹¤'},
        {english:'play', korean:'ë†€ë‹¤, ì—°ì£¼í•˜ë‹¤'},
        {english:'sing', korean:'ë…¸ë˜í•˜ë‹¤'},
        {english:'dance', korean:'ì¶¤ì¶”ë‹¤'},
        {english:'open', korean:'ì—´ë‹¤'},
        {english:'close', korean:'ë‹«ë‹¤'},
        {english:'come', korean:'ì˜¤ë‹¤'},
        {english:'go', korean:'ê°€ë‹¤'},
        {english:'see', korean:'ë³´ë‹¤'},
        {english:'hear', korean:'ë“£ë‹¤'},
        {english:'talk', korean:'ë§í•˜ë‹¤'},
        {english:'listen', korean:'ë“£ë‹¤'},
        {english:'give', korean:'ì£¼ë‹¤'},
        {english:'take', korean:'ê°€ì ¸ê°€ë‹¤'},
        {english:'make', korean:'ë§Œë“¤ë‹¤'},
        {english:'find', korean:'ì°¾ë‹¤'},
        {english:'help', korean:'ë•ë‹¤'},
        {english:'love', korean:'ì‚¬ë‘í•˜ë‹¤'},
        {english:'like', korean:'ì¢‹ì•„í•˜ë‹¤'},
        {english:'want', korean:'ì›í•˜ë‹¤'},
        {english:'need', korean:'í•„ìš”í•˜ë‹¤'},
        {english:'wash', korean:'ì”»ë‹¤'},
        {english:'clean', korean:'ì²­ì†Œí•˜ë‹¤'},
        {english:'stop', korean:'ë©ˆì¶”ë‹¤'},
        {english:'start', korean:'ì‹œì‘í•˜ë‹¤'},
        {english:'laugh', korean:'ì›ƒë‹¤'},
        {english:'cry', korean:'ìš¸ë‹¤'},
        {english:'sleep', korean:'ìë‹¤'}
      ]
    },
    mid: {
      name: 'ì¤‘ë“± 100ê°œ',
      words: [
        {english:'ability', korean:'ëŠ¥ë ¥'},
        {english:'accident', korean:'ì‚¬ê³ '},
        {english:'achieve', korean:'ì„±ì·¨í•˜ë‹¤'},
        {english:'active', korean:'í™œë™ì ì¸'},
        {english:'advice', korean:'ì¡°ì–¸'},
        {english:'afford', korean:'~í•  ì—¬ìœ ê°€ ìˆë‹¤'},
        {english:'agree', korean:'ë™ì˜í•˜ë‹¤'},
        {english:'allow', korean:'í—ˆë½í•˜ë‹¤'},
        {english:'almost', korean:'ê±°ì˜'},
        {english:'alone', korean:'í˜¼ìì¸'},
        {english:'along', korean:'~ì„ ë”°ë¼'},
        {english:'already', korean:'ì´ë¯¸'},
        {english:'although', korean:'ë¹„ë¡ ~ì¼ì§€ë¼ë„'},
        {english:'amount', korean:'ì–‘, ì•¡ìˆ˜'},
        {english:'ancient', korean:'ê³ ëŒ€ì˜'},
        {english:'announce', korean:'ë°œí‘œí•˜ë‹¤'},
        {english:'appear', korean:'ë‚˜íƒ€ë‚˜ë‹¤'},
        {english:'apply', korean:'ì‹ ì²­í•˜ë‹¤, ì ìš©í•˜ë‹¤'},
        {english:'area', korean:'ì§€ì—­, ì˜ì—­'},
        {english:'argue', korean:'ë…¼ìŸí•˜ë‹¤'},
        {english:'arrange', korean:'ì •ë¦¬í•˜ë‹¤, ë°°ì—´í•˜ë‹¤'},
        {english:'arrive', korean:'ë„ì°©í•˜ë‹¤'},
        {english:'article', korean:'ê¸°ì‚¬, ë¬¼í’ˆ'},
        {english:'attend', korean:'ì°¸ì„í•˜ë‹¤'},
        {english:'avoid', korean:'í”¼í•˜ë‹¤'},
        {english:'balance', korean:'ê· í˜•'},
        {english:'behavior', korean:'í–‰ë™'},
        {english:'belong', korean:'ì†í•˜ë‹¤'},
        {english:'benefit', korean:'ì´ìµ, í˜œíƒ'},
        {english:'beyond', korean:'~ì„ ë„˜ì–´'},
        {english:'birth', korean:'íƒ„ìƒ'},
        {english:'blame', korean:'ë¹„ë‚œí•˜ë‹¤'},
        {english:'block', korean:'ë§‰ë‹¤, ë¸”ë¡'},
        {english:'blood', korean:'í”¼'},
        {english:'board', korean:'íŒ, íƒ‘ìŠ¹í•˜ë‹¤'},
        {english:'borrow', korean:'ë¹Œë¦¬ë‹¤'},
        {english:'brave', korean:'ìš©ê°í•œ'},
        {english:'breathe', korean:'ìˆ¨ì‰¬ë‹¤'},
        {english:'bridge', korean:'ë‹¤ë¦¬'},
        {english:'bright', korean:'ë°ì€'},
        {english:'bring', korean:'ê°€ì ¸ì˜¤ë‹¤'},
        {english:'build', korean:'ì§“ë‹¤'},
        {english:'burn', korean:'íƒœìš°ë‹¤'},
        {english:'business', korean:'ì‚¬ì—…'},
        {english:'busy', korean:'ë°”ìœ'},
        {english:'captain', korean:'ì„ ì¥, ì£¼ì¥'},
        {english:'carry', korean:'ë‚˜ë¥´ë‹¤'},
        {english:'cause', korean:'ì›ì¸, ~ì„ ì¼ìœ¼í‚¤ë‹¤'},
        {english:'century', korean:'ì„¸ê¸°'},
        {english:'certain', korean:'í™•ì‹¤í•œ'},
        {english:'chance', korean:'ê¸°íšŒ'},
        {english:'change', korean:'ë³€í™”, ë°”ê¾¸ë‹¤'},
        {english:'character', korean:'ì„±ê²©, ë“±ì¥ì¸ë¬¼'},
        {english:'check', korean:'í™•ì¸í•˜ë‹¤, ìˆ˜í‘œ'},
        {english:'choose', korean:'ì„ íƒí•˜ë‹¤'},
        {english:'clear', korean:'ëª…í™•í•œ, ê¹¨ë—í•œ'},
        {english:'climb', korean:'ì˜¤ë¥´ë‹¤'},
        {english:'close', korean:'ë‹«ë‹¤, ê°€ê¹Œìš´'},
        {english:'cloud', korean:'êµ¬ë¦„'},
        {english:'collect', korean:'ëª¨ìœ¼ë‹¤'},
        {english:'common', korean:'í”í•œ'},
        {english:'compare', korean:'ë¹„êµí•˜ë‹¤'},
        {english:'complete', korean:'ì™„ì„±í•˜ë‹¤'},
        {english:'condition', korean:'ìƒíƒœ, ì¡°ê±´'},
        {english:'connect', korean:'ì—°ê²°í•˜ë‹¤'},
        {english:'contain', korean:'í¬í•¨í•˜ë‹¤'},
        {english:'continue', korean:'ê³„ì†í•˜ë‹¤'},
        {english:'control', korean:'í†µì œí•˜ë‹¤'},
        {english:'copy', korean:'ë³µì‚¬í•˜ë‹¤'},
        {english:'corner', korean:'ëª¨í‰ì´'},
        {english:'correct', korean:'ì˜¬ë°”ë¥¸, ìˆ˜ì •í•˜ë‹¤'},
        {english:'cost', korean:'ë¹„ìš©'},
        {english:'count', korean:'ì„¸ë‹¤'},
        {english:'country', korean:'ë‚˜ë¼, ì‹œê³¨'},
        {english:'cover', korean:'ë®ë‹¤'},
        {english:'create', korean:'ì°½ì¡°í•˜ë‹¤'},
        {english:'culture', korean:'ë¬¸í™”'},
        {english:'customer', korean:'ì†ë‹˜, ê³ ê°'},
        {english:'daily', korean:'ë§¤ì¼ì˜'},
        {english:'damage', korean:'ì†í•´, ì†ìƒì‹œí‚¤ë‹¤'},
        {english:'dangerous', korean:'ìœ„í—˜í•œ'},
        {english:'decide', korean:'ê²°ì •í•˜ë‹¤'},
        {english:'decrease', korean:'ì¤„ì´ë‹¤'},
        {english:'deep', korean:'ê¹Šì€'},
        {english:'deliver', korean:'ë°°ë‹¬í•˜ë‹¤'},
        {english:'depend', korean:'ì˜ì¡´í•˜ë‹¤'},
        {english:'describe', korean:'ë¬˜ì‚¬í•˜ë‹¤'},
        {english:'design', korean:'ì„¤ê³„í•˜ë‹¤'},
        {english:'develop', korean:'ë°œì „í•˜ë‹¤'},
        {english:'difference', korean:'ì°¨ì´'},
        {english:'difficult', korean:'ì–´ë ¤ìš´'},
        {english:'direction', korean:'ë°©í–¥'},
        {english:'disappear', korean:'ì‚¬ë¼ì§€ë‹¤'},
        {english:'discover', korean:'ë°œê²¬í•˜ë‹¤'},
        {english:'distance', korean:'ê±°ë¦¬'},
        {english:'divide', korean:'ë‚˜ëˆ„ë‹¤'},
        {english:'doctor', korean:'ì˜ì‚¬'},
        {english:'double', korean:'ë‘ ë°°ì˜'},
        {english:'draw', korean:'ê·¸ë¦¬ë‹¤'},
        {english:'dream', korean:'ê¿ˆ, ê¿ˆê¾¸ë‹¤'}
      ]
    },
    high: {
      name: 'ê³ ë“± 100ê°œ',
      words: [
        {english:'abandon', korean:'ë²„ë¦¬ë‹¤, í¬ê¸°í•˜ë‹¤'},
        {english:'abstract', korean:'ì¶”ìƒì ì¸'},
        {english:'abuse', korean:'ë‚¨ìš©í•˜ë‹¤, í•™ëŒ€í•˜ë‹¤'},
        {english:'accompany', korean:'ë™í–‰í•˜ë‹¤'},
        {english:'accomplish', korean:'ì´ë£¨ë‹¤'},
        {english:'accumulate', korean:'ì¶•ì í•˜ë‹¤'},
        {english:'accurate', korean:'ì •í™•í•œ'},
        {english:'adapt', korean:'ì ì‘í•˜ë‹¤'},
        {english:'adequate', korean:'ì¶©ë¶„í•œ'},
        {english:'adjust', korean:'ì¡°ì •í•˜ë‹¤'},
        {english:'advocate', korean:'ì˜¹í˜¸í•˜ë‹¤'},
        {english:'alter', korean:'ë³€ê²½í•˜ë‹¤'},
        {english:'ambiguous', korean:'ì• ë§¤í•œ'},
        {english:'analyze', korean:'ë¶„ì„í•˜ë‹¤'},
        {english:'anticipate', korean:'ì˜ˆìƒí•˜ë‹¤'},
        {english:'apparent', korean:'ë¶„ëª…í•œ'},
        {english:'appropriate', korean:'ì ì ˆí•œ'},
        {english:'approve', korean:'ìŠ¹ì¸í•˜ë‹¤'},
        {english:'artificial', korean:'ì¸ê³µì˜'},
        {english:'assign', korean:'í• ë‹¹í•˜ë‹¤'},
        {english:'assume', korean:'ê°€ì •í•˜ë‹¤'},
        {english:'assure', korean:'ë³´ì¥í•˜ë‹¤'},
        {english:'attach', korean:'ë¶™ì´ë‹¤'},
        {english:'attempt', korean:'ì‹œë„í•˜ë‹¤'},
        {english:'attain', korean:'ë‹¬ì„±í•˜ë‹¤'},
        {english:'aware', korean:'ì•Œê³  ìˆëŠ”'},
        {english:'barrier', korean:'ì¥ë²½'},
        {english:'benefit', korean:'ì´ìµ, í˜œíƒ'},
        {english:'burden', korean:'ë¶€ë‹´'},
        {english:'calculate', korean:'ê³„ì‚°í•˜ë‹¤'},
        {english:'candidate', korean:'í›„ë³´ì'},
        {english:'capacity', korean:'ìˆ˜ìš©ë ¥, ëŠ¥ë ¥'},
        {english:'capture', korean:'ë¶™ì¡ë‹¤'},
        {english:'cease', korean:'ì¤‘ë‹¨í•˜ë‹¤'},
        {english:'challenge', korean:'ë„ì „'},
        {english:'circumstance', korean:'ìƒí™©'},
        {english:'collapse', korean:'ë¶•ê´´í•˜ë‹¤'},
        {english:'colleague', korean:'ë™ë£Œ'},
        {english:'commit', korean:'ì €ì§€ë¥´ë‹¤, í—Œì‹ í•˜ë‹¤'},
        {english:'compensate', korean:'ë³´ìƒí•˜ë‹¤'},
        {english:'compile', korean:'í¸ì§‘í•˜ë‹¤'},
        {english:'complain', korean:'ë¶ˆí‰í•˜ë‹¤'},
        {english:'component', korean:'êµ¬ì„± ìš”ì†Œ'},
        {english:'comprise', korean:'êµ¬ì„±í•˜ë‹¤'},
        {english:'concentrate', korean:'ì§‘ì¤‘í•˜ë‹¤'},
        {english:'conclude', korean:'ê²°ë¡ ì§“ë‹¤'},
        {english:'concrete', korean:'êµ¬ì²´ì ì¸'},
        {english:'conduct', korean:'ìˆ˜í–‰í•˜ë‹¤, í–‰ë™'},
        {english:'confirm', korean:'í™•ì¸í•˜ë‹¤'},
        {english:'conflict', korean:'ê°ˆë“±, ì¶©ëŒ'},
        {english:'conform', korean:'ìˆœì‘í•˜ë‹¤'},
        {english:'consequence', korean:'ê²°ê³¼'},
        {english:'considerable', korean:'ìƒë‹¹í•œ'},
        {english:'consist', korean:'ì´ë£¨ì–´ì ¸ ìˆë‹¤'},
        {english:'constant', korean:'ì§€ì†ì ì¸'},
        {english:'construct', korean:'ê±´ì„¤í•˜ë‹¤'},
        {english:'consume', korean:'ì†Œë¹„í•˜ë‹¤'},
        {english:'contribute', korean:'ê¸°ì—¬í•˜ë‹¤'},
        {english:'controversy', korean:'ë…¼ë€'},
        {english:'convenient', korean:'í¸ë¦¬í•œ'},
        {english:'convert', korean:'ì „í™˜í•˜ë‹¤'},
        {english:'cooperate', korean:'í˜‘ë ¥í•˜ë‹¤'},
        {english:'cope', korean:'ëŒ€ì²˜í•˜ë‹¤'},
        {english:'corporate', korean:'ê¸°ì—…ì˜'},
        {english:'correspond', korean:'ì¼ì¹˜í•˜ë‹¤'},
        {english:'crucial', korean:'ê²°ì •ì ì¸'},
        {english:'cultivate', korean:'ê²½ì‘í•˜ë‹¤, ê°œë°œí•˜ë‹¤'},
        {english:'dedicate', korean:'í—Œì‹ í•˜ë‹¤'},
        {english:'defend', korean:'ë°©ì–´í•˜ë‹¤'},
        {english:'demonstrate', korean:'ì‹œì—°í•˜ë‹¤, ì…ì¦í•˜ë‹¤'},
        {english:'deny', korean:'ë¶€ì¸í•˜ë‹¤'},
        {english:'depart', korean:'ë– ë‚˜ë‹¤'},
        {english:'depress', korean:'ìš°ìš¸í•˜ê²Œ í•˜ë‹¤'},
        {english:'derive', korean:'ëŒì–´ë‚´ë‹¤, ìœ ë˜í•˜ë‹¤'},
        {english:'deserve', korean:'~í•  ê°€ì¹˜ê°€ ìˆë‹¤'},
        {english:'detect', korean:'ê°ì§€í•˜ë‹¤'},
        {english:'determine', korean:'ê²°ì •í•˜ë‹¤'},
        {english:'diminish', korean:'ì¤„ì–´ë“¤ë‹¤'},
        {english:'discipline', korean:'ê·œìœ¨, í›ˆë ¨'},
        {english:'distinguish', korean:'êµ¬ë³„í•˜ë‹¤'},
        {english:'distribute', korean:'ë¶„ë°°í•˜ë‹¤'},
        {english:'domestic', korean:'êµ­ë‚´ì˜, ê°€ì •ì˜'},
        {english:'dominate', korean:'ì§€ë°°í•˜ë‹¤'},
        {english:'eliminate', korean:'ì œê±°í•˜ë‹¤'},
        {english:'emerge', korean:'ë‚˜íƒ€ë‚˜ë‹¤'},
        {english:'emphasize', korean:'ê°•ì¡°í•˜ë‹¤'},
        {english:'enable', korean:'ê°€ëŠ¥í•˜ê²Œ í•˜ë‹¤'},
        {english:'encounter', korean:'ë§ˆì£¼ì¹˜ë‹¤'},
        {english:'enhance', korean:'í–¥ìƒì‹œí‚¤ë‹¤'},
        {english:'ensure', korean:'ë³´ì¥í•˜ë‹¤'},
        {english:'equivalent', korean:'ë™ë“±í•œ'},
        {english:'establish', korean:'ì„¤ë¦½í•˜ë‹¤'},
        {english:'evaluate', korean:'í‰ê°€í•˜ë‹¤'},
        {english:'evolve', korean:'ì§„í™”í•˜ë‹¤'},
        {english:'exceed', korean:'ì´ˆê³¼í•˜ë‹¤'},
        {english:'exclude', korean:'ì œì™¸í•˜ë‹¤'},
        {english:'expand', korean:'í™•ì¥í•˜ë‹¤'},
        {english:'exploit', korean:'ì´ìš©í•˜ë‹¤, ì°©ì·¨í•˜ë‹¤'},
        {english:'expose', korean:'ë“œëŸ¬ë‚´ë‹¤'},
        {english:'extend', korean:'ì—°ì¥í•˜ë‹¤'}
      ]
    },
    uni: {
      name: 'ëŒ€í•™ 100ê°œ',
      words: [
        {english:'abolish', korean:'íì§€í•˜ë‹¤'},
        {english:'abrupt', korean:'ê°‘ì‘ìŠ¤ëŸ¬ìš´'},
        {english:'abundant', korean:'í’ë¶€í•œ'},
        {english:'accessible', korean:'ì ‘ê·¼ ê°€ëŠ¥í•œ'},
        {english:'accommodate', korean:'ìˆ˜ìš©í•˜ë‹¤, í¸ì˜ë¥¼ ì œê³µí•˜ë‹¤'},
        {english:'accompany', korean:'ë™ë°˜í•˜ë‹¤'},
        {english:'accomplish', korean:'ì™„ìˆ˜í•˜ë‹¤'},
        {english:'accumulate', korean:'ì¶•ì í•˜ë‹¤'},
        {english:'acquisition', korean:'ìŠµë“, ì·¨ë“'},
        {english:'adjacent', korean:'ì¸ì ‘í•œ'},
        {english:'advocate', korean:'ì˜¹í˜¸í•˜ë‹¤'},
        {english:'aggregate', korean:'ëª¨ìœ¼ë‹¤, ì´í•©'},
        {english:'allocate', korean:'í• ë‹¹í•˜ë‹¤'},
        {english:'alter', korean:'ë³€ê²½í•˜ë‹¤'},
        {english:'ambiguous', korean:'ëª¨í˜¸í•œ'},
        {english:'analogy', korean:'ìœ ì‚¬, ë¹„ìœ '},
        {english:'analyze', korean:'ë¶„ì„í•˜ë‹¤'},
        {english:'anomaly', korean:'ë³€ì¹™, ì˜ˆì™¸'},
        {english:'apparent', korean:'ëª…ë°±í•œ'},
        {english:'applicable', korean:'ì ìš© ê°€ëŠ¥í•œ'},
        {english:'appreciate', korean:'ê°ì‚¬í•˜ë‹¤, ê°ìƒí•˜ë‹¤'},
        {english:'arbitrary', korean:'ì„ì˜ì˜, ë…ë‹¨ì ì¸'},
        {english:'aspect', korean:'ì¸¡ë©´'},
        {english:'assemble', korean:'ëª¨ìœ¼ë‹¤, ì¡°ë¦½í•˜ë‹¤'},
        {english:'assess', korean:'í‰ê°€í•˜ë‹¤'},
        {english:'assign', korean:'ë¶€ê³¼í•˜ë‹¤, í• ë‹¹í•˜ë‹¤'},
        {english:'assume', korean:'ê°€ì •í•˜ë‹¤'},
        {english:'attain', korean:'ë‹¬ì„±í•˜ë‹¤'},
        {english:'attribute', korean:'~ì˜ ê²°ê³¼ë¡œ ë³´ë‹¤'},
        {english:'authorize', korean:'ìŠ¹ì¸í•˜ë‹¤'},
        {english:'autonomous', korean:'ììœ¨ì ì¸'},
        {english:'behalf', korean:'ì´ìµ, í¸'},
        {english:'beneficial', korean:'ìœ ìµí•œ'},
        {english:'bias', korean:'í¸ê²¬'},
        {english:'bulk', korean:'ëŒ€ë¶€ë¶„, í° ê·œëª¨'},
        {english:'capacity', korean:'ìš©ëŸ‰, ëŠ¥ë ¥'},
        {english:'cease', korean:'ì¤‘ë‹¨í•˜ë‹¤'},
        {english:'coherent', korean:'ì¼ê´€ëœ'},
        {english:'coincide', korean:'ë™ì‹œì— ì¼ì–´ë‚˜ë‹¤'},
        {english:'collapse', korean:'ë¶•ê´´í•˜ë‹¤'},
        {english:'colleague', korean:'ë™ë£Œ'},
        {english:'commence', korean:'ì‹œì‘í•˜ë‹¤'},
        {english:'commodity', korean:'ìƒí’ˆ'},
        {english:'compatible', korean:'ì–‘ë¦½ ê°€ëŠ¥í•œ'},
        {english:'compile', korean:'í¸ì§‘í•˜ë‹¤'},
        {english:'complement', korean:'ë³´ì™„í•˜ë‹¤'},
        {english:'comprehensive', korean:'ì¢…í•©ì ì¸'},
        {english:'comprise', korean:'í¬í•¨í•˜ë‹¤, êµ¬ì„±í•˜ë‹¤'},
        {english:'compulsory', korean:'ì˜ë¬´ì ì¸'},
        {english:'conceive', korean:'ìƒìƒí•˜ë‹¤, ìƒê°í•˜ë‹¤'},
        {english:'concurrent', korean:'ë™ì‹œì— ë°œìƒí•˜ëŠ”'},
        {english:'confer', korean:'ìƒì˜í•˜ë‹¤, ìˆ˜ì—¬í•˜ë‹¤'},
        {english:'confine', korean:'ì œí•œí•˜ë‹¤'},
        {english:'confirm', korean:'í™•ì¸í•˜ë‹¤'},
        {english:'conform', korean:'ë”°ë¥´ë‹¤'},
        {english:'consent', korean:'ë™ì˜í•˜ë‹¤'},
        {english:'consequent', korean:'ê²°ê³¼ë¡œì„œ ì¼ì–´ë‚˜ëŠ”'},
        {english:'considerable', korean:'ìƒë‹¹í•œ'},
        {english:'constitute', korean:'êµ¬ì„±í•˜ë‹¤'},
        {english:'constrain', korean:'ê°•ìš”í•˜ë‹¤'},
        {english:'construct', korean:'ê±´ì„¤í•˜ë‹¤'},
        {english:'consult', korean:'ìƒë‹´í•˜ë‹¤'},
        {english:'consume', korean:'ì†Œë¹„í•˜ë‹¤'},
        {english:'contemporary', korean:'ë™ì‹œëŒ€ì˜'},
        {english:'contradict', korean:'ë°˜ë°•í•˜ë‹¤'},
        {english:'contrary', korean:'ë°˜ëŒ€ì˜'},
        {english:'controversial', korean:'ë…¼ë€ì´ ë˜ëŠ”'},
        {english:'convene', korean:'ì†Œì§‘í•˜ë‹¤'},
        {english:'converse', korean:'ëŒ€í™”í•˜ë‹¤, ë°˜ëŒ€ì˜'},
        {english:'convert', korean:'ì „í™˜í•˜ë‹¤'},
        {english:'cooperate', korean:'í˜‘ë ¥í•˜ë‹¤'},
        {english:'coordinate', korean:'ì¡°ì •í•˜ë‹¤'},
        {english:'core', korean:'í•µì‹¬'},
        {english:'correspond', korean:'ì¼ì¹˜í•˜ë‹¤, í•´ë‹¹í•˜ë‹¤'},
        {english:'crucial', korean:'ê²°ì •ì ì¸'},
        {english:'currency', korean:'í†µí™”, ìœ í†µ'},
        {english:'deduce', korean:'ì¶”ë¡ í•˜ë‹¤'},
        {english:'demonstrate', korean:'ì…ì¦í•˜ë‹¤'},
        {english:'denote', korean:'ë‚˜íƒ€ë‚´ë‹¤'},
        {english:'derive', korean:'ëŒì–´ë‚´ë‹¤, ìœ ë˜í•˜ë‹¤'},
        {english:'detect', korean:'ê°ì§€í•˜ë‹¤'},
        {english:'deviate', korean:'ë²—ì–´ë‚˜ë‹¤'},
        {english:'differentiate', korean:'êµ¬ë³„í•˜ë‹¤'},
        {english:'dimension', korean:'ì°¨ì›, ê·œëª¨'},
        {english:'diminish', korean:'ê°ì†Œí•˜ë‹¤'},
        {english:'discrete', korean:'ë³„ê°œì˜'},
        {english:'discriminate', korean:'ì°¨ë³„í•˜ë‹¤, êµ¬ë³„í•˜ë‹¤'},
        {english:'dispose', korean:'ì²˜ë¦¬í•˜ë‹¤'},
        {english:'distinct', korean:'ëšœë ·í•œ'},
        {english:'distort', korean:'ì™œê³¡í•˜ë‹¤'},
        {english:'distribute', korean:'ë°°í¬í•˜ë‹¤'},
        {english:'diverse', korean:'ë‹¤ì–‘í•œ'},
        {english:'document', korean:'ê¸°ë¡í•˜ë‹¤'},
        {english:'domain', korean:'ì˜ì—­'},
        {english:'domestic', korean:'êµ­ë‚´ì˜'},
        {english:'dominant', korean:'ì§€ë°°ì ì¸'},
        {english:'duration', korean:'ì§€ì† ê¸°ê°„'},
        {english:'dynamic', korean:'ì—­ë™ì ì¸'},
        {english:'eliminate', korean:'ì œê±°í•˜ë‹¤'},
        {english:'empirical', korean:'ê²½í—˜ì— ì˜í•œ'}
      ]
    }
  };

  // ===== 1) ìƒíƒœ =====
  const LEVELS = { 1:3, 2:5, 3:7 };
  let selectedSetKey = null; // 'elem' | 'mid' | 'high' | 'uni'
  let selectedLevel = 1;
  let choiceCount = 3;

  let sessionPool = []; // 100ê°œ
  let queue = [];
  let completed = new Set();
  let current = null;
  let locked = false; // ë‹µë³€ ì²˜ë¦¬ ì¤‘ ì…ë ¥ ì ê¸ˆ

  // ===== 2) ìœ í‹¸ =====
  const $ = (sel) => document.querySelector(sel);
  const $$ = (sel) => Array.from(document.querySelectorAll(sel));
  const shuffle = (arr) => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1]);
  const norm = (s) => (s||'').replace(/\s+/g,' ').trim();
  function speak(text){ if(!window.speechSynthesis) return; speechSynthesis.cancel(); const u=new SpeechSynthesisUtterance(text); u.lang='en-US'; u.rate=0.95; speechSynthesis.speak(u); }

  // ===== 3) í™”ë©´ ì „í™˜ =====
  function show(id){ $$('.view').forEach(v=>v.classList.remove('active')); $(id).classList.add('active'); }

  // ===== 4) í€´ì¦ˆ ë¡œì§ =====
  const crumbEl = $('#crumb');
  const wordEl = $('#word-display');
  const choicesEl = $('#choices');
  const showChoicesBtn = $('#show-choices-btn');
  const idkBtn = $('#idk-btn');
  const nextBtn = $('#next-btn');
  const ttsBtn = $('#tts-btn');
  const feedback = $('#feedback');

  function updateCrumb(){
    const setName = DATASETS[selectedSetKey].name;
    crumbEl.textContent = `${setName} Â· ${selectedLevel}ë‹¨ê³„ Â· ì™„ë£Œ ${completed.size}/${sessionPool.length}`;
  }

  function makeChoices(correctKorean){
    const need = choiceCount - 1;
    const pool = sessionPool.length > choiceCount ? sessionPool : DATASETS[selectedSetKey].words;
    const distractors = new Set();
    for(const w of shuffle(pool)){
      const k = norm(w.korean);
      if(k && k !== norm(correctKorean)){
        distractors.add(k);
        if(distractors.size >= need) break;
      }
    }
    return shuffle([norm(correctKorean), ...distractors]);
  }

  function renderChoices(options){
    choicesEl.classList.remove('cols-3','cols-5','cols-7');
    choicesEl.classList.add(`cols-${choiceCount}`);
    choicesEl.innerHTML = '';
    options.forEach(text=>{
      const btn = document.createElement('button');
      btn.className = 'btn btn-ghost';
      btn.style.minHeight = '44px';
      btn.textContent = text;
      btn.addEventListener('click', ()=> handleChoice(text, btn));
      choicesEl.appendChild(btn);
    });
  }

  function nextQuestion(){
    if(queue.length === 0){
      alert('í´ë¦¬ì–´! 100ë¬¸ì œë¥¼ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤ ğŸ‘');
      show('#level-view');
      return;
    }
    current = queue.shift();
    locked = false;
    feedback.textContent = '';
    nextBtn.disabled = true;
    // ìˆ¨ê¹€ ìƒíƒœë¡œ ì‹œì‘
    choicesEl.classList.add('hidden');
    showChoicesBtn.disabled = false;
    showChoicesBtn.textContent = 'ë³´ê¸°';
    // ë‹¨ì–´ í‘œì‹œ + ìë™ ë°œí™”
    wordEl.textContent = current.english;
    speak(current.english);
    updateCrumb();
  }

  function revealChoices(){
    if(!current) return;
    const opts = makeChoices(current.korean);
    renderChoices(opts);
    choicesEl.classList.remove('hidden');
    showChoicesBtn.disabled = true;
    showChoicesBtn.textContent = 'ë³´ê¸° í‘œì‹œë¨';
  }

  function lockChoices(){
    Array.from(choicesEl.children).forEach(b=> b.disabled = true);
  }

  function handleChoice(selectedKorean, btn){
    if(locked || !current) return; locked = true;
    const correct = norm(current.korean);
    const chosen = norm(selectedKorean);
    const isCorrect = (chosen === correct);

    lockChoices();
    // ë²„íŠ¼ í•˜ì´ë¼ì´íŠ¸
    Array.from(choicesEl.children).forEach(b=>{
      if(norm(b.textContent)===correct) b.classList.add('correct');
    });
    if(btn && !isCorrect) btn.classList.add('wrong');

    if(isCorrect){
      completed.add(current.english);
      feedback.style.color = 'green';
      feedback.textContent = 'ì •ë‹µì…ë‹ˆë‹¤!';
      updateCrumb();
      setTimeout(()=> nextQuestion(), 350); // ì •ë‹µì€ ìë™ ì§„í–‰
    }else{
      feedback.style.color = '#d93025';
      feedback.textContent = `ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µ: ${current.korean}`;
      // ì˜¤ë‹µì€ í ë’¤ë¡œ
      queue.push(current);
      nextBtn.disabled = false; // ì‚¬ìš©ìê°€ "ë‹¤ìŒ"ì„ ëˆŒëŸ¬ ì§„í–‰
    }
  }

  function handleIDK(){
    if(locked || !current) return; locked = true;
    // ë³´ê¸° ì—†ìœ¼ë©´ ë¨¼ì € í¼ì¹˜ê¸°
    if(choicesEl.classList.contains('hidden')) revealChoices();
    lockChoices();
    // ì •ë‹µ í‘œì‹œ
    const correct = norm(current.korean);
    Array.from(choicesEl.children).forEach(b=>{
      if(norm(b.textContent)===correct) b.classList.add('correct');
    });
    feedback.style.color = '#e69500';
    feedback.textContent = `ëª¨ë¦„ ì„ íƒ! ì •ë‹µ: ${current.korean}`;
    // í ë’¤ë¡œ ë³´ë‚´ ì¬ì¶œì œ
    queue.push(current);
    nextBtn.disabled = false; // ë‹¤ìŒ ë²„íŠ¼ìœ¼ë¡œë§Œ ì§„í–‰
  }

  // ===== 5) ì´ë²¤íŠ¸ ë°”ì¸ë”© =====
  // í™ˆ â†’ ì„¸íŠ¸ ì„ íƒ
  $$('#home-view [data-set]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      selectedSetKey = btn.dataset.set;
      $('#level-title').textContent = DATASETS[selectedSetKey].name;
      show('#level-view');
    });
  });

  // ë‹¨ê³„ ì„ íƒ
  $$('#level-view [data-level]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      selectedLevel = Number(btn.dataset.level);
      choiceCount = LEVELS[selectedLevel] || 3;
      const { words } = DATASETS[selectedSetKey];
      sessionPool = words.slice(0, 100).map(w=>({english:w.english, korean:w.korean}));
      queue = shuffle(sessionPool.slice());
      completed = new Set();
      // ì´ˆê¸° UI
      choicesEl.innerHTML = '';
      choicesEl.classList.add('hidden');
      nextBtn.disabled = true;
      showChoicesBtn.disabled = false; showChoicesBtn.textContent = 'ë³´ê¸°';
      show('#quiz-view');
      nextQuestion();
    });
  });

  // ë’¤ë¡œ
  $('#back-home').addEventListener('click', ()=>{ show('#home-view'); });

  // ë³´ê¸° ë²„íŠ¼
  showChoicesBtn.addEventListener('click', revealChoices);
  // ëª¨ë¦„
  idkBtn.addEventListener('click', handleIDK);
  // ë‹¤ìŒ
  nextBtn.addEventListener('click', ()=>{ if(!nextBtn.disabled) nextQuestion(); });
  // ë‹¤ì‹œ ë“£ê¸°
  ttsBtn.addEventListener('click', ()=>{ if(current) speak(current.english); });

  // ì‹œì‘ì€ í™ˆ
  show('#home-view');
  </script>
</body>
</html>
